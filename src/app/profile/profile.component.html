<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
<div class="main-container">
  
  <app-navbar></app-navbar>

<div class="alert alert-success" *ngIf="message">
  {{ message }}
</div>
<div class="alert alert-danger" *ngIf="pwDMessage">
  {{ pwDMessage }}
</div>
<div class="alert alert-success" *ngIf="pwSMessage">
  {{ pwSMessage }}
</div>

<div class="container">
<div class="page-content page-container" id="page-content">
  <div class="padding">
      <div class="row container d-flex justify-content-center">
          <div class="col-xl-12 col-md-12 col-xxl-12">
              <div class="card user-card-full">
                  <div class="row m-l-0 m-r-0">
                      <div class="col-sm-4 bg-c-lite-blue user-profile">
                          <div class="card-block text-center text-white">
                              <div class="m-b-25">
                                  <div class="img-container">
                                      <img *ngIf="userProfilePicture" width="150px" height="150px" [src]="userProfilePicture" alt="" style="border-radius: 50%;">
                                      <img *ngIf="!userProfilePicture" width="150px" height="150px" [src]="photoUrl" alt="" style="border-radius: 50%;">
                                      <span class="material-symbols-outlined edit-button" onclick="document.getElementById('selectedFile').click();">
                                        edit
                                        </span>
                                  </div>
                                      <input type="file" id="selectedFile" style="display: none;" (change)="onFileSelected($event)" accept="image/*">
                              </div>
                              <h6 class="f-w-600">{{savedUserName}}</h6>
                              <img src="https://firebasestorage.googleapis.com/v0/b/soterchat-app.appspot.com/o/logo%2Flogo-lightbabyblue.png?alt=media&token=c4d5582d-8f5a-4853-9ed9-a7eeb341bbf3" style="max-width: 50%; opacity: 0.4;" alt="">
                          </div>
                      </div>
                      <div class="col-sm-8">
                          <div class="card-block">
                              <h6 class="m-b-20 p-b-5 b-b-default f-w-600">Profile</h6>
                              <div class="row">
                                <div class="col-sm-7 col-xs-6">
                                    <p class="m-b-10 f-w-600">Username</p>
                                    <h6 class="text-muted f-w-400"><input *ngIf="!editName" maxlength="13" [(ngModel)]="currentUserDisplayName" [disabled]="!editName" type="text" class="disabled-elements" [ngClass]="{'editPassword': !editName, 'noEditPassword': editName}"></h6>
                                    <h6 class="text-muted f-w-400" *ngIf="editName" ><input maxlength="13" [(ngModel)]="currentUserDisplayName" [disabled]="!editName" type="text" class="disabled-elements" [ngClass]="{'editPassword': !editName, 'noEditPassword': editName}"></h6>
                                </div>
                                <div class="col-sm-5 col-xs-6">
                                  <div class="card-block row">
                                  <div class="m-b-20 f-w-600 align-items-center"></div>
                                  <h6 class="f-w-400 save-elements col" style="cursor: pointer; " *ngIf="!editName" (click)="editName = true">Edit</h6>
                                  <h6 class="f-w-400 save-elements col" style="cursor: pointer; color:#ff3e3e;" *ngIf="editName" (click)="editName = false">Cancel</h6>
                                  <h6 class="f-w-400 save-elements col" style="cursor: pointer;  color: #4CAF50;" *ngIf="editName" (click)="updateDisplayName()" >Save</h6>
                                </div>
                                </div>
                                  <div class="col-sm-12">
                                    <p class="m-b-10 f-w-600">Email</p>
                                    <h6 class="text-muted f-w-400"><input [(ngModel)]="currentUserEmail" disabled type="text" class="disabled-elements"></h6>
                                    <div class="col-12 text-danger" style="font-size: 13px;opacity: 0.5;">Email can't be changed.</div>
                                  </div>
                                  <div class="col-sm-7 col-xs-6">
                                    <p class="m-b-10 f-w-600">Password</p>
                                    <h6 class="text-muted f-w-400"><input *ngIf="!editPassword" value="***********" [disabled]="!editPassword" type="password" class="disabled-elements" [ngClass]="{'editPassword': !editPassword, 'noEditPassword': editPassword}"></h6>
                                    <h6 class="text-muted f-w-400" *ngIf="editPassword" ><input value="" [(ngModel)]="newPassword" [disabled]="!editPassword" type="password" class="disabled-elements" [ngClass]="{'editPassword': !editPassword, 'noEditPassword': editPassword}"></h6>
                                  </div>
                                <div class="col-sm-5 col-xs-6" >
                                  <div class="card-block row">
                                  <p class="m-b-10 f-w-600"></p>
                                  <h6 class="f-w-400 colsave-elements" style="cursor: pointer;" *ngIf="!editPassword" (click)="editPassword = true">Edit</h6>
                                  <h6 class="f-w-400 col save-elements" style="cursor: pointer; color:#ff3e3e;" *ngIf="editPassword" (click)="editPassword = false">Cancel</h6>
                                  <h6 class="f-w-400 col save-elements" style="cursor: pointer; color: #4CAF50;" *ngIf="editPassword" (click)="updatePassword()">Save</h6>
                                </div>
                              </div>
                              <div *ngIf="editPassword" class="col text-danger" style="font-size: 15px;">Enter your new password!</div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>
</div>
</div>



























<div class="container d-flex flex-column align-items-center">
  <!-- <input [(ngModel)]="displayName" type="text">  -->
    
    
  <p>{{currentUserDisplayName}} </p>
  <!-- <p>{{displayName}}asd</p> -->
    <img *ngIf="userProfilePicture" width="150px" height="150px" [src]="userProfilePicture" alt="">
    <img *ngIf="!userProfilePicture" width="150px" height="150px" [src]="photoUrl" alt="">
    <div *ngIf="imageUrl">
      <img [src]="imageUrl" alt="Uploaded Image">
    </div>
      
    <div>
     
      <input type="button" value="Profilkép feltöltése" onclick="document.getElementById('selectedFile').click();" />
      <input type="file" id="selectedFile" style="display: none;" (change)="onFileSelected($event)" accept="image/*">
    </div>
    <div class="row p-3 w-50">
      <div class="col-md-4">Felhasználónév</div>
      <div class="col-md-4"><input [(ngModel)]="currentUserDisplayName" type="text"></div>

    
    <div class="col-md-4">Email</div>
    <div class="col-md-4" *ngIf="!editEmail"><input [(ngModel)]="currentUserEmail" disabled type="text"></div>
    <div class="col-md-4" *ngIf="editEmail"><input [(ngModel)]="typedEmail"  type="text"></div>



    <!-- <button  class="col-md-2" (click)="updateDisplayName()">Mentés</button> -->
  </div>
</div>